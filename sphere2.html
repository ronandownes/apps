<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Sphere Calculator (π = 22/7)</title>

<style>
:root{--ink:#000;--line:#cfcfcf;--muted:#666;--blue:#2563eb;--orange:#f97316}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,Arial,sans-serif;background:#fff;color:var(--ink)}
.wrap{max-width:900px;margin:6px auto;padding:0 6px}
.card{border:1px solid var(--line);border-radius:10px;padding:12px}

.controls-row{display:flex;flex-wrap:wrap;gap:8px;align-items:start;margin-bottom:12px}
.block{border:1px solid var(--line);border-radius:8px;padding:8px}
.block h3{margin:0 0 4px;font-size:12px}

.shape-block{min-width:140px}
.shape-title{font-family:"Times New Roman",Times,serif;font-size:22px;font-weight:700}
.shape-sub{font-size:11px;color:var(--muted);margin-top:2px}

.radius-block{display:flex;align-items:center;gap:12px;padding:10px 16px}
.radius-block h3{margin:0;font-size:13px}
.value-input{width:90px;border:2px solid var(--blue);border-radius:6px;padding:8px 10px;font-size:22px;text-align:center;font-family:"Times New Roman",Times,serif;font-weight:bold}
.value-input:focus{outline:none;border-color:#000}
.radius-display{font-family:"Times New Roman",Times,serif;font-size:20px}

.pi-note{font-family:"Times New Roman",Times,serif;font-size:16px;padding:10px 14px;background:#fff7ed;border:1px solid var(--orange);border-radius:8px}

.btnrow{display:grid;grid-template-columns:repeat(5,1fr);gap:3px}
.btnrow button{border:1px solid var(--line);border-radius:5px;background:#fff;font-size:11px;padding:5px 3px;cursor:pointer}
.btnrow button.active{background:#000;color:#fff}

.reveal-btn{border:2px solid var(--line);border-radius:6px;background:#fff;font-size:14px;padding:10px 20px;cursor:pointer;font-weight:bold}
.reveal-btn:hover{background:#f5f5f5}

.main{display:grid;grid-template-columns:220px 1fr 1fr;gap:12px;align-items:start}

.diagram svg{width:100%;height:auto;display:block}
.formulas{font-family:"Times New Roman",Times,serif;margin-top:6px}
.formulas .f{font-size:15px;margin:4px 0}

.calc{border:1px solid var(--line);border-radius:8px;padding:12px;transition:filter 0.3s ease}
.calc.hidden{filter:blur(5px)}
.calc h2{margin:0 0 10px;font-size:15px;color:var(--orange);font-family:"Times New Roman",Times,serif;font-style:italic}
.line{font-family:"Times New Roman",Times,serif;font-size:17px;margin:6px 0}

.answer-container{margin:12px 0}
.answer-box{display:inline-block;border:2px solid #000;padding:10px 16px;font-family:"Times New Roman",Times,serif;font-size:22px}

.frac{display:inline-flex;flex-direction:column;align-items:center;vertical-align:middle;margin:0 3px}
.frac-num{border-bottom:2px solid #000;padding:0 4px 2px}
.frac-den{padding:2px 4px 0}

@media(max-width:700px){
  .main{grid-template-columns:1fr}
}
</style>
</head>

<body>
<div class="wrap">
<section class="card">

<div class="controls-row">
  <div class="block shape-block">
    <div class="shape-title">Sphere</div>
    <div class="shape-sub">3D shape</div>
  </div>
  
  <div class="block radius-block">
    <h3>Radius</h3>
    <input type="number" class="value-input" id="valueInput" min="0" step="1" value="5">
    <div class="radius-display" id="radiusDisplay"><i>r</i> = 5</div>
  </div>
  
  <div class="block">
    <h3>Units</h3>
    <div class="btnrow" id="unitBtns"></div>
  </div>
  
  <div class="pi-note">Take π = <span class="frac"><span class="frac-num">22</span><span class="frac-den">7</span></span></div>
  
  <button class="reveal-btn" id="revealBtn">Reveal</button>
</div>

<div class="main">
  <div class="diagram-area">
    <div class="diagram">
      <svg viewBox="0 0 220 220" aria-label="Sphere diagram">
        <defs>
          <radialGradient id="sphereGrad" cx="35%" cy="35%" r="60%">
            <stop offset="0%" style="stop-color:#fdba74"/>
            <stop offset="100%" style="stop-color:#ea580c"/>
          </radialGradient>
          <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="5" markerHeight="5" orient="auto">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#000"/>
          </marker>
        </defs>
        <!-- Sphere -->
        <circle cx="110" cy="110" r="90" fill="url(#sphereGrad)" stroke="#000" stroke-width="2"/>
        <!-- Dashed back circle -->
        <ellipse cx="110" cy="110" rx="90" ry="25" fill="none" stroke="#000" stroke-width="1.5" stroke-dasharray="6,4"/>
        <!-- Center dot -->
        <circle cx="110" cy="110" r="4" fill="#2563eb"/>
        <!-- Radius line -->
        <line x1="110" y1="110" x2="195" y2="110" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
        <!-- Radius label -->
        <text id="rLabel" x="150" y="100" font-size="16" font-family="Times New Roman">5 cm</text>
      </svg>
    </div>
    <div class="formulas">
      <div class="f"><i>V</i> = <span class="frac"><span class="frac-num">4</span><span class="frac-den">3</span></span>π<i>r</i>³</div>
      <div class="f"><i>A</i> = 4π<i>r</i>²</div>
    </div>
  </div>

  <div class="calc" id="volumeCalc">
    <h2>Volume</h2>
    <div class="line">Volume = <span class="frac"><span class="frac-num">4</span><span class="frac-den">3</span></span>π<i>r</i>³</div>
    <div class="line" id="vS1"></div>
    <div class="answer-container">
      <div class="answer-box" id="vAns"></div>
    </div>
  </div>

  <div class="calc" id="areaCalc">
    <h2>Surface area</h2>
    <div class="line">Surface area = 4π<i>r</i>²</div>
    <div class="line" id="aS1"></div>
    <div class="answer-container">
      <div class="answer-box" id="aAns"></div>
    </div>
  </div>
</div>

</section>
</div>

<script>
let r = 5;
let unit = null;
let answersVisible = false;

const units = [
  {symbol:'cm', name:'centimetre'},
  {symbol:'mm', name:'millimetre'},
  {symbol:'m', name:'metre'},
  {symbol:'km', name:'kilometre'},
  {symbol:'', name:'units'}
];

const valueInput = document.getElementById("valueInput");
const revealBtn = document.getElementById("revealBtn");
const volumeCalc = document.getElementById("volumeCalc");
const areaCalc = document.getElementById("areaCalc");

valueInput.addEventListener("input", () => {
  let newValue = parseFloat(valueInput.value);
  if (!isNaN(newValue) && newValue >= 0) {
    r = newValue;
    update();
  }
});

valueInput.addEventListener("change", () => {
  let newValue = parseFloat(valueInput.value);
  if (isNaN(newValue) || newValue < 0) newValue = 5;
  r = newValue;
  valueInput.value = r;
  update();
});

revealBtn.addEventListener("click", () => {
  answersVisible = !answersVisible;
  if (answersVisible) {
    revealBtn.textContent = "Hide";
    volumeCalc.classList.remove("hidden");
    areaCalc.classList.remove("hidden");
  } else {
    revealBtn.textContent = "Reveal";
    volumeCalc.classList.add("hidden");
    areaCalc.classList.add("hidden");
  }
});

const unitWrap = document.getElementById("unitBtns");
units.forEach((u, idx) => {
  const b = document.createElement("button");
  b.textContent = u.symbol || 'units';
  b.title = u.name;
  if (idx === 0) b.classList.add("active");
  b.onclick = () => {
    document.querySelectorAll("#unitBtns button").forEach(x => x.classList.remove("active"));
    b.classList.add("active");
    unit = u;
    update();
  };
  unitWrap.appendChild(b);
});

// GCD for simplifying fractions
function gcd(a, b) {
  a = Math.abs(Math.round(a));
  b = Math.abs(Math.round(b));
  while (b) {
    let t = b;
    b = a % b;
    a = t;
  }
  return a;
}

// Create fraction HTML
function fracHTML(num, den) {
  if (den === 1) return String(num);
  const g = gcd(num, den);
  num = num / g;
  den = den / g;
  const whole = Math.floor(num / den);
  const remainder = num % den;
  if (remainder === 0) return String(whole);
  if (whole > 0) {
    return `${whole}<span class="frac"><span class="frac-num">${remainder}</span><span class="frac-den">${den}</span></span>`;
  }
  return `<span class="frac"><span class="frac-num">${num}</span><span class="frac-den">${den}</span></span>`;
}

function update() {
  const unitStr = unit && unit.symbol ? ' ' + unit.symbol : '';
  const unitStr2 = unit && unit.symbol ? ' ' + unit.symbol + '²' : '';
  const unitStr3 = unit && unit.symbol ? ' ' + unit.symbol + '³' : '';

  const rDisp = Number.isInteger(r) ? r : r.toFixed(2);
  
  document.getElementById("radiusDisplay").innerHTML = `<i>r</i> = ${rDisp}${unitStr}`;
  document.getElementById("rLabel").textContent = rDisp + unitStr;

  // Using π = 22/7
  // Volume = (4/3) × (22/7) × r³ = (4 × 22 × r³) / (3 × 7) = (88 × r³) / 21
  // Surface Area = 4 × (22/7) × r² = (88 × r²) / 7

  const r3 = r * r * r;
  const r2 = r * r;
  
  // Volume: numerator = 88 × r³, denominator = 21
  const volNum = 88 * r3;
  const volDen = 21;
  
  // Surface area: numerator = 88 × r², denominator = 7
  const areaNum = 88 * r2;
  const areaDen = 7;

  // Volume display
  document.getElementById("vS1").innerHTML = 
    `= <span class="frac"><span class="frac-num">4</span><span class="frac-den">3</span></span> × <span class="frac"><span class="frac-num">22</span><span class="frac-den">7</span></span> × (${rDisp})³`;
  
  document.getElementById("vAns").innerHTML = `= ${fracHTML(volNum, volDen)}${unitStr3}`;

  // Surface area display
  document.getElementById("aS1").innerHTML = 
    `= 4 × <span class="frac"><span class="frac-num">22</span><span class="frac-den">7</span></span> × (${rDisp})²`;
  
  document.getElementById("aAns").innerHTML = `= ${fracHTML(areaNum, areaDen)}${unitStr2}`;
}

unit = units[0];
update();
</script>
</body>
</html>
