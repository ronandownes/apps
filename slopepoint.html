<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Slope + Point → Line Equation</title>

<style>
  :root{
    --bg:#ffffff;
    --panel:#ffffff;
    --ink:#0b1220;
    --muted:#5b667a;
    --line:#d7dde8;
    --soft:#f5f7fb;

    --blue:#2563eb;
    --red:#dc2626;

    --good:#16a34a;
    --warn:#b45309;

    --shadow: 0 1px 0 rgba(15,23,42,.04), 0 8px 22px rgba(15,23,42,.08);
    --radius:12px;

    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    --sans: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }

  [data-theme="dark"]{
    --bg:#0b1220;
    --panel:#0f172a;
    --ink:#e7edf8;
    --muted:#a6b3c8;
    --line:#26314a;
    --soft:#0b1220;
    --shadow: 0 1px 0 rgba(0,0,0,.2), 0 8px 22px rgba(0,0,0,.35);
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:var(--sans);
    background:var(--bg);
    color:var(--ink);
  }

  .wrap{max-width:900px;margin:20px auto;padding:0 20px}
  .topbar{
    display:flex;gap:10px;align-items:center;justify-content:space-between;
    margin:0 0 20px;
  }
  .title h1{margin:0;font-size:22px;letter-spacing:.2px}
  .toolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

  .btn{
    appearance:none;border:1px solid var(--line);
    background:var(--panel);color:var(--ink);
    padding:10px 14px;border-radius:10px;
    font-size:13px;cursor:pointer;
  }
  .btn:hover{border-color:var(--muted)}
  .btn.primary{border-color:transparent;background:var(--blue);color:#fff}

  .card{
    background:var(--panel);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:24px;
    margin-bottom:20px;
  }

  .inputSection{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:24px;
    margin-bottom:30px;
  }
  @media (max-width: 700px){
    .inputSection{grid-template-columns:1fr}
  }

  .inputBlock h2{
    margin:0 0 16px;
    font-size:16px;
    color:var(--muted);
    font-weight:600;
  }

  .slopeInputs{
    display:grid;
    grid-template-columns: 80px 1fr 60px 1fr;
    gap:12px;
    align-items:center;
  }
  .slopeInputs label{
    font-size:14px;
    color:var(--muted);
    font-weight:500;
  }
  .slopeInputs .slash{
    text-align:center;
    font-size:32px;
    color:var(--muted);
    font-weight:300;
  }

  input, select{
    width:100%;
    padding:14px;
    border:2px solid var(--line);
    border-radius:10px;
    background:var(--panel);
    color:var(--ink);
    font-size:18px;
    font-weight:600;
    outline:none;
    text-align:center;
  }
  input:focus, select:focus{border-color:var(--blue); box-shadow:0 0 0 3px rgba(37,99,235,.15)}

  .pointInputs{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:12px;
  }
  .pointInputs label{
    display:block;
    font-size:14px;
    color:var(--muted);
    font-weight:500;
    margin-bottom:8px;
  }

  .stepsCard{
    background:var(--panel);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:32px;
  }

  .stepsCard h2{
    margin:0 0 24px;
    font-size:18px;
    font-weight:700;
  }

  .step{
    font-size:22px;
    line-height:1.8;
    margin:16px 0;
    font-family:var(--mono);
  }
  .step.large{
    font-size:26px;
    font-weight:600;
    margin:24px 0;
    padding:16px;
    background:var(--soft);
    border-radius:10px;
    border-left:4px solid var(--blue);
  }

  .methodSep{
    margin:40px 0;
    border-top:2px solid var(--line);
    padding-top:24px;
  }

  .blue{color:var(--blue);font-weight:700}
  .red{color:var(--red);font-weight:700}
  .muted{color:var(--muted)}

  .fracDisp{
    display:inline-grid;
    grid-template-rows:auto auto;
    align-items:center;
    justify-items:center;
    vertical-align:middle;
    margin:0 4px;
  }
  .fracDisp .top{padding:0 6px;font-size:20px}
  .fracDisp .bar{
    height:2px;width:100%;
    background:currentColor;
    opacity:.8;
    margin:2px 0;
  }
  .fracDisp .bot{padding:0 6px;font-size:20px}
</style>
</head>

<body>
<div class="wrap" id="app">
  <div class="topbar">
    <div class="title">
      <h1>Slope + Point → Equation of a Line</h1>
    </div>
    <div class="toolbar">
      <button class="btn" id="themeBtn" type="button">Dark</button>
      <button class="btn" id="resetBtn" type="button">Reset</button>
    </div>
  </div>

  <div class="card">
    <div class="inputSection">
      <div class="inputBlock">
        <h2>Slope (as fraction)</h2>
        <div class="slopeInputs">
          <label>Sign:</label>
          <select id="sign">
            <option value="+" selected>+</option>
            <option value="-">−</option>
          </select>
          <input id="num" inputmode="numeric" type="number" min="0" step="1" value="2" />
          <div class="slash">/</div>
          <input id="den" inputmode="numeric" type="number" min="1" step="1" value="3" />
        </div>
      </div>

      <div class="inputBlock">
        <h2>Point on the line</h2>
        <div class="pointInputs">
          <div>
            <label>x₁</label>
            <input id="x1" inputmode="numeric" type="number" step="1" value="1" />
          </div>
          <div>
            <label>y₁</label>
            <input id="y1" inputmode="numeric" type="number" step="1" value="4" />
          </div>
        </div>
      </div>
    </div>

    <button class="btn primary" type="button" id="updateBtn" style="width:100%;padding:16px;font-size:16px">Calculate</button>
  </div>

  <div class="stepsCard">
    <h2>Solution Steps</h2>
    <div id="steps"></div>
  </div>
</div>

<script>
(function(){
  const $ = (sel) => document.querySelector(sel);

  const app = $("#app");
  const inputs = {
    sign: $("#sign"),
    num: $("#num"),
    den: $("#den"),
    x1: $("#x1"),
    y1: $("#y1")
  };

  const out = {
    steps: $("#steps"),
    themeBtn: $("#themeBtn"),
    resetBtn: $("#resetBtn"),
    updateBtn: $("#updateBtn")
  };

  function gcd(a,b){
    a = Math.abs(a); b = Math.abs(b);
    while(b){ const t = a % b; a = b; b = t; }
    return a || 1;
  }

  function fmtIntOrDec(v){
    return Number.isInteger(v) ? String(v) : v.toFixed(2);
  }

  function readState(){
    const signRaw = (inputs.sign.value || "").trim();
    const sign = (signRaw === "-" || signRaw === "−") ? "-" : "+";
    let p = parseInt(inputs.num.value, 10);
    let q = parseInt(inputs.den.value, 10);
    let x1 = parseFloat(inputs.x1.value);
    let y1 = parseFloat(inputs.y1.value);

    if (!Number.isFinite(p)) p = 0;
    if (!Number.isFinite(q)) q = 1;
    if (!Number.isFinite(x1)) x1 = 0;
    if (!Number.isFinite(y1)) y1 = 0;

    p = Math.abs(p);
    q = Math.abs(q);
    if (q === 0) q = 1;

    const g = gcd(p,q);
    const ps = p / g;
    const qs = q / g;

    const s = (sign === "-") ? -1 : 1;
    const m = (qs === 0) ? 0 : s * (ps / qs);

    return { sign, s, p: ps, q: qs, m, x1, y1 };
  }

  function buildSteps(state){
    const { sign, p, q, x1, y1, s, m } = state;

    const sGlyph = (s === -1) ? "−" : "";
    const frac = `<span class="fracDisp ${s===-1 ? "red":"blue"}"><span class="top">${p}</span><span class="bar"></span><span class="bot">${q}</span></span>`;
    const mInline = (s===-1) ? `<span class="red">−</span>${frac}` : `${frac}`;

    // Method 1: Point-slope algebra
    const html = [];
    
    html.push(`<div class="step large">Given: m = ${mInline}, Point = (${fmtIntOrDec(x1)}, ${fmtIntOrDec(y1)})</div>`);

    html.push(`<h3 style="margin:32px 0 16px;font-size:18px">Method 1: Point-Slope Form</h3>`);
    
    html.push(`<div class="step">y − y₁ = m(x − x₁)</div>`);
    html.push(`<div class="step">y − (${fmtIntOrDec(y1)}) = ${mInline}(x − (${fmtIntOrDec(x1)}))</div>`);
    
    html.push(`<div class="step">Multiply both sides by ${q}:</div>`);
    html.push(`<div class="step">${q}(y − (${fmtIntOrDec(y1)})) = ${s===-1 ? "−" : ""}${p}(x − (${fmtIntOrDec(x1)}))</div>`);
    
    html.push(`<div class="step">Expand:</div>`);
    html.push(`<div class="step">${q}y − ${fmtIntOrDec(q*y1)} = ${s===-1 ? "−" : ""}${p}x − ${s===-1 ? "−" : ""}${fmtIntOrDec(p*x1)}</div>`);
    
    html.push(`<div class="step">Rearrange to standard form:</div>`);
    const C = (s*p*x1) - (q*y1);
    html.push(`<div class="step large">${s===-1 ? "−" : ""}${p}x − ${q}y = ${fmtIntOrDec(C)}</div>`);

    const bNum = (q*y1) - (s*p*x1);
    const b = bNum / q;
    html.push(`<div class="step">Slope-intercept form:</div>`);
    html.push(`<div class="step large">y = ${mInline}x + ${fmtIntOrDec(b)}</div>`);

    // Method 2: Direct standard form
    html.push(`<div class="methodSep"></div>`);
    html.push(`<h3 style="margin:0 0 16px;font-size:18px">Method 2: Direct Standard Form (Alternative)</h3>`);
    
    const yCoeff = -s*q;
    const yCoeffDisp = (yCoeff >= 0) ? `+ ${Math.abs(yCoeff)}y` : `− ${Math.abs(yCoeff)}y`;
    
    html.push(`<div class="step">Use slope ratio directly: ${p}x ${yCoeffDisp} = k</div>`);
    html.push(`<div class="step">Substitute point to find k:</div>`);
    const k = (p*x1) + (yCoeff*y1);
    html.push(`<div class="step">k = ${p}(${fmtIntOrDec(x1)}) ${yCoeff >= 0 ? "+ " : "− "}${Math.abs(yCoeff)}(${fmtIntOrDec(y1)})</div>`);
    html.push(`<div class="step">k = ${fmtIntOrDec(k)}</div>`);
    
    html.push(`<div class="step large">${p}x ${yCoeffDisp} = ${fmtIntOrDec(k)}</div>`);

    out.steps.innerHTML = html.join("");
  }

  function update(){
    const st = readState();
    buildSteps(st);
  }

  function setTheme(theme){
    app.setAttribute("data-theme", theme);
    out.themeBtn.textContent = theme === "dark" ? "Light" : "Dark";
  }
  function flipTheme(){
    const cur = app.getAttribute("data-theme") || "light";
    setTheme(cur === "dark" ? "light" : "dark");
  }

  function reset(){
    inputs.sign.value = "+";
    inputs.num.value = 2;
    inputs.den.value = 3;
    inputs.x1.value = 1;
    inputs.y1.value = 4;
    update();
  }

  out.updateBtn.addEventListener("click", update);
  out.resetBtn.addEventListener("click", reset);
  out.themeBtn.addEventListener("click", flipTheme);

  ["change","input"].forEach(evt=>{
    inputs.sign.addEventListener(evt, update);
    inputs.num.addEventListener(evt, update);
    inputs.den.addEventListener(evt, update);
    inputs.x1.addEventListener(evt, update);
    inputs.y1.addEventListener(evt, update);
  });

  setTheme("light");
  update();
})();
</script>
</body>
</html>